var _createClass=function(){function e(e,r){for(var i=0;i<r.length;i++){var c=r[i];c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(e,c.key,c)}}return function(r,i,c){return i&&e(r.prototype,i),c&&e(r,c),r}}();function _classCallCheck(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}Node.prototype.css=function(e){if(/Object/.test(Object.prototype.toString.call(e)))for(var r in e)e[r]&&(this.style[r]=e[r]);return this};var indexV2Script=function(){function e(){var r=this;_classCallCheck(this,e),this.sensorsobj={platform_type:"H5",secondaryPageName:"推荐",secondaryPageSorting:"0",moduleName:"",moduleID:"",moduleLocation:"",elementName:"",elementID:"",elementLocation:"",elementContentType:"",elementContent:""},this.urlurl=location.protocol+"//"+location.host,this.storageData=null,this.isSetTheme=!0,this.getBgimg="none",this.getBgcolor="none",this.initItem=1,this.initPage=10,this.newSwiperIsOpen=!0,this.swiperBgColor="none",this.bodys=document.querySelectorAll("body")[0],this.v2Route().then(function(){r.renderingDom(),r.bannerJump()},function(e){aspenLib.tips(e.msg)}),this.tabJump(),this.searchDefault()}return _createClass(e,[{key:"v2Route",value:function(){var e=this;return new Promise(function(r,i){aspenLib.ajax({url:aspenLib.ajaxUrl+"/mallHome/sceneIndexVH",type:"post",contentType:"application/x-www-form-urlencoded",headers:{token:localStorage.getItem("token")||""},data:{applicationScene:1},success:function(c){1==c.result?("string"==typeof c.data?(e.storageData=JSON.parse(c.data),console.log(JSON.parse(c.data))):e.storageData=c.data,r()):i(c)},error:function(){aspenLib.tips("接口请求出错了")}})})}},{key:"getId",value:function(e){return document.getElementById(e)}},{key:"scrollSetTheme",value:function(){var e=this,r=document.querySelectorAll("#indexV2Tab a");window.addEventListener("scroll",function(){e.newSwiperIsOpen&&((document.body.scrollTop>0?document.body.scrollTop:document.documentElement.scrollTop)>0?(e.isSetTheme=!1,e.getId("indexV2Headers").css({background:"#fff","box-shadow":"2px 0 10px 0 #999"}),r&&r.forEach(function(e,r){e.css({color:"#333"})}),e.getId("indexV2SearchBtns").css({color:"#333"})):(e.isSetTheme=!0,e.getId("indexV2Headers").css({background:e.swiperBgColor,"box-shadow":"none"}),r&&r.forEach(function(e,r){e.css({color:"#fff"})}),e.getId("indexV2SearchBtns").css({color:"#fff"})))})}},{key:"newSwiper",value:function(e,r){var i=this,c=function(){if(i.newSwiperIsOpen||i.isSetTheme){var e=document.querySelectorAll("#indexV2Tab a"),r=document.querySelectorAll("#indexV2SwipterWrap .swiper-slide-active");r.length>0&&r.forEach(function(r,c){i.isSetTheme&&i.newSwiperIsOpen&&("1"===r.getAttribute("data-type")?0==c&&(i.getBgimg||i.getBgcolor?(i.getId("indexV2Headers").css({background:i.getBgcolor}),i.bodys.css({background:i.getBgcolor+" url("+i.getBgimg+") no-repeat center 1.64rem","background-size":"100% auto"}),e&&e.forEach(function(e,r){e.css({color:"#fff"})}),i.getId("indexV2SearchBtns").css({color:"#fff"}),document.querySelectorAll("#indexV2Promise em").forEach(function(e,r){e.css({color:"#fff"})}),document.querySelectorAll("#indexV2Promise i").forEach(function(e,r){e.css({color:"#fff"})})):(i.bodys.css({background:"#fff"}),e&&e.forEach(function(e,r){e.css({color:"#333"})}),i.getId("indexV2SearchBtns").css({color:"#333"}))):r.getAttribute("data-bgcolor")&&i.isSetTheme?(i.swiperBgColor=r.getAttribute("data-bgcolor"),i.getId("indexV2Headers").css({background:r.getAttribute("data-bgcolor")}),i.getId("swiperV2Wraps").css({background:r.getAttribute("data-bgcolor")}),e&&e.forEach(function(e,r){e.css({color:"#fff"})}),i.getId("indexV2SearchBtns").css({color:"#fff"})):(i.bodys.css({background:"#fff"}),e&&e.forEach(function(e,r){e.css({color:"#333"})}),i.getId("indexV2SearchBtns").css({color:"#333"})))})}};this.newSwiperState=new Swiper(e,{pagination:r,loop:!0,grabCursor:!0,autoplay:5e3,observer:!0,observeParents:!0,paginationClickable:!0,autoplayDisableOnInteraction:!1,onSlideChangeStart:function(){c()},onSwiperCreated:function(){c()}})}},{key:"LazyLoadImg",value:function(e){e&&LazyLoad(e)}},{key:"sortType",value:function(e,r){return e.type-r.type}},{key:"searchDefault",value:function(){var e=document.querySelectorAll(".index-v2-sinpt")[0],r=document.getElementById("indexV2SearchBtns");aspenLib.ajax({url:aspenLib.ajaxUrl+"/searchProductDefaultH5.do",type:"post",dataType:"json",headers:{},data:{},success:function(i){if(i&&"1"==i.result)if(e.innerHTML=i.data.actActiveEntranceList[0].activeWord,i.data.actActiveEntranceList[0].activeLink)switch(i.data.actActiveEntranceList[0].activeType/1){case 1:r.href="scene.html?scene_id="+i.data.actActiveEntranceList[0].activeLink;break;case 2:r.href="merchant/index.html?sellerId="+i.data.actActiveEntranceList[0].activeLink;break;case 3:r.href="detail.html?productId="+i.data.actActiveEntranceList[0].activeLink;break;case 4:r.href=i.data.actActiveEntranceList[0].activeLink}else r.href="search.html?keyword="+escape(i.data.actActiveEntranceList[0].activeWord)},error:function(e){console.log(e)}})}},{key:"renderingDom",value:function(){var e=this;if(this.storageData.nvaManageList.length>0){var r="";r+='<a data-navindex="0" data-sc_navname="推荐" href="javascript:;" class="v2ninit cur">推荐</a>',this.storageData.nvaManageList.forEach(function(i,c){i.image?r+='<a data-sc_navindex="'+(c+1)+'" data-sc_navname="'+i.productListTitle+'" data-subtitle="'+i.productListTitle+'" href="'+(i.jumpUrl||"javascript:;")+'" data-pid="'+i.id+'"><img src="'+i.image+'" /></a>':(r+='<a data-navindex="'+(c+1)+'" data-sc_navname="'+i.title+'" data-subtitle="'+i.productListTitle+'" href="javascript:;" data-pid="'+i.id+'">'+i.title+"</a>",e.getId("classListV2").innerHTML+='<div class="aspen-content-sort clearfix" id="v2TabContent'+i.id+'"></div>')}),this.getId("indexV2Tab").innerHTML=r,r=null}if(this.storageData.carousels.length>0){var i="";this.getBgcolor=this.storageData.carousels[0].colorValue,this.getBgimg=this.storageData.carousels[0].backUrl,this.storageData.carousels.forEach(function(e,r){i+='<div data-bgcolor="'+(e.colorValue||"")+'" data-type="'+(e.openStatus||0)+'" data-backurl="'+(e.backUrl||"")+'" class="swiper-slide"><a class="js_sc_jump" href="javaScript:;" data-sc_1="首页轮播图" data-sc_2="swiperV2Wraps" data-sc_3="0" data-sc_4="'+e.title+'" data-sc_5="'+e.id+'" data-sc_6="'+r+'" data-sc_7="3" data-sc_8="'+e.jump_url+'"  data-sc_href="'+e.jump_url+'"><img src="'+e.cover_img+'"></a></div>'}),this.getId("indexV2SwipterWrap").innerHTML=i,this.newSwiper("#indexSwiperWrapV2","#indexPaginationV2"),i=null}if(this.storageData.navList.dataList.length>0){var c="";this.storageData.navList.dataList.forEach(function(e,r){c+='<a class="js_sc_jump" href="javaScript:;" data-sc_1="快捷导航" data-sc_2="v2PromiseWraps" data-sc_3="1" data-sc_4="'+e.title+'" data-sc_5="'+e.jump_id+'" data-sc_6="'+r+'" data-sc_7="3" data-sc_8="'+e.jump_url+'"  data-sc_href="'+e.jump_url+'" data-jid="'+e.jump_id+'"><i><img src="'+e.cover_img+'" /></i><em>'+e.title+"</em></a>"}),this.getId("indexV2Function").innerHTML=c;var t=document.querySelectorAll("#indexV2Function em");this.storageData.navList.dataList[0].backUrl?(this.getId("indexV2Function").css({background:"url("+this.storageData.navList.dataList[0].backUrl+")","background-size":"100% auto"}),t.length>0&&t.forEach(function(e,r){e.css({color:"#fff"})})):this.storageData.navList.dataList[0].colorValue?(this.getId("indexV2Function").css({background:this.storageData.navList.dataList[0].colorValue}),t.length>0&&t.forEach(function(e,r){e.css({color:"#fff"})})):this.getId("indexV2Function").css({background:"#fff"}),c=null}if(this.storageData.threeRideThreeList.length>0){var o=this.storageData.threeRideThreeList[0].list.sort(this.sortType),g="";4==this.storageData.threeRideThreeList[0].adType?this.storageData.threeRideThreeList[0].list.length>0&&0==o[0].type?g+='<div class="index-v2-push s1 clearfix">':g+='<div class="index-v2-push s4 clearfix">':(this.storageData.threeRideThreeList[0].title&&(g+='<h2 class="index-v2-title" style="background-size: 100% auto; background: url('+(this.storageData.threeRideThreeList[0].backUrl||"#fff")+") no-repeat center top; color: "+(this.storageData.threeRideThreeList[0].colorValue||"#AB77F7")+'">'+(this.storageData.threeRideThreeList[0].title||"每日狂")+"</h2>"),g+='<div class="index-v2-push s2 clearfix">'),o.length>0&&o.forEach(function(r,i){r.dataStatus&&(g+='<a class="js_sc_jump" href="javaScript:;" data-sc_1="'+(e.storageData.threeRideThreeList[0].title||"每日狂")+'" data-sc_2="indexV2Hots" data-sc_3="2" data-sc_4="'+r.title+'" data-sc_5="'+r.adFloorId+'" data-sc_6="'+i+'" data-sc_7="3" data-sc_8="'+r.resourcePath+'"  data-sc_href="'+r.resourcePath+'" data-tid="'+r.adFloorId+'" data-fid="'+r.adFloorTypeId+'"><img src="static/images_v2/i-load.png" data-original="'+r.imgPath+'" /></a>')}),g+="</div>",this.getId("indexV2Hots").innerHTML=g,this.storageData.threeRideThreeList[0].backUrl?this.getId("indexV2Hots").css({background:"url("+this.storageData.threeRideThreeList[0].backUrl+")","background-size":"100% auto"}):this.storageData.threeRideThreeList[0].colorValue&&this.getId("indexV2Hots").css({background:this.storageData.threeRideThreeList[0].colorValue}),this.LazyLoadImg(document.querySelectorAll("#indexV2Hots img")),g=null,o=null}if(this.storageData.onePlusThreeList.length>0){var h="",l="";this.storageData.onePlusThreeList[0].colorValue&&(l=-1!=this.storageData.onePlusThreeList[0].colorValue.indexOf(",")?this.storageData.onePlusThreeList[0].colorValue.split(",")[1]:this.storageData.onePlusThreeList[0].colorValue),this.storageData.onePlusThreeList[0].title&&l&&this.storageData.onePlusThreeList[0].backUrl&&(h+='<h2 class="index-v2-title" style="background-size: cover; background: url('+(this.storageData.onePlusThreeList[0].backUrl?this.storageData.onePlusThreeList[0].backUrl:"")+") no-repeat center top; color: "+(l||"#AB77F7")+'">'+(this.storageData.onePlusThreeList[0].title||"新用户专享")+"</h2>"),h+='<div class="index-v2-push s1 clearfix">',this.storageData.onePlusThreeList[0].list.length>0&&this.storageData.onePlusThreeList[0].list.forEach(function(r,i){r.userGroup==e.storageData.isNewPerson&&r.dataStatus&&(h+='<a data-tid="'+r.adFloorId+'" data-fid="'+r.adFloorTypeId+'" href="'+r.resourcePath+'"><img src="static/images_v2/i-load.png" data-original="'+r.imgPath+'" /></a>')}),h+="</div>",this.getId("indexV2NewUser").innerHTML=h,this.LazyLoadImg(document.querySelectorAll("#indexV2NewUser img")),h=null}if(this.storageData.onePlusOneList.length>0){var p="",v="";v=this.storageData.onePlusOneList[0].colorValue&&-1!=this.storageData.onePlusOneList[0].colorValue.indexOf(",")?this.storageData.onePlusOneList[0].colorValue.split(",")[1]:this.storageData.onePlusOneList[0].colorValue,this.storageData.onePlusOneList[0].title&&(p+='<h2 class="index-v2-title" style="background-size: cover; background: url('+(this.storageData.onePlusOneList[0].backUrl?this.storageData.onePlusOneList[0].backUrl:"")+") no-repeat center top; color: "+(v||"#AB77F7")+'">'+(this.storageData.onePlusOneList[0].title||"新用户专享")+'</h2><div class="index-v2-push s2 clearfix">'),this.storageData.onePlusOneList[0].list.length>0&&this.storageData.onePlusOneList[0].list.forEach(function(r,i){r.dataStatus&&(p+='<a class="js_sc_jump" href="javaScript:;" data-sc_1="'+(e.storageData.onePlusThreeList[0].title||"新用户专享")+'" data-sc_2="indexV2Gone" data-sc_3="4" data-sc_4="'+r.title+'" data-sc_5="'+r.id+'" data-sc_6="'+i+'" data-sc_7="3" data-sc_8="'+r.resourcePath+'"  data-sc_href="'+r.resourcePath+'" data-tid="'+r.adFloorId+'" data-fid="'+r.adFloorTypeId+'"><img src="static/images_v2/i-load.png" data-original="'+r.imgPath+'" /></a>')}),p+="</div>",this.getId("indexV2Gone").innerHTML=p,this.LazyLoadImg(document.querySelectorAll("#indexV2Gone img")),p=null}if(this.storageData.adFloorList.length>0){var a="",f="",d=this.storageData.adFloorList[0].list.sort(this.sortType);f=this.storageData.adFloorList[0].colorValue&&-1!=this.storageData.adFloorList[0].colorValue.indexOf(",")?this.storageData.adFloorList[0].colorValue.split(",")[1]:this.storageData.adFloorList[0].colorValue,0==this.storageData.adFloorList[0].adType?a+='<div class="index-v2-push s0 clearfix">':1==this.storageData.adFloorList[0].adType||3==this.storageData.adFloorList[0].adType?a+='<div class="index-v2-push s2 clearfix">':2==this.storageData.adFloorList[0].adType?a+='<div class="index-v2-push s3 clearfix">':4==this.storageData.adFloorList[0].adType?0==d[0].type?a+='<div class="index-v2-push s1 clearfix">':a+='<div class="index-v2-push s4 clearfix">':5==this.storageData.adFloorList[0].adType?a+='<div class="index-v2-push s1 clearfix">':a+='<div class="index-v2-push s2 clearfix">',this.storageData.adFloorList[0].backUrl||this.storageData.adFloorList[0].colorValue?a+='<h2 class="index-v2-title" style="background-size: cover; background: url('+(this.storageData.adFloorList[0].backUrl?this.storageData.adFloorList[0].backUrl:"")+") no-repeat center top; color: "+(f||"#AB77F7")+'">'+(this.storageData.adFloorList[0].title||"每日狂")+"</h2>":a+="",d.length>0&&d.forEach(function(r,i){r.dataStatus&&(a+='<a class="js_sc_jump" href="javaScript:;" data-sc_1="'+(e.storageData.adFloorList[0].title||"每日狂")+'" data-sc_2="indexV2Crazy" data-sc_3="5" data-sc_4="'+r.title+'" data-sc_5="'+r.id+'" data-sc_6="'+i+'" data-sc_7="3" data-sc_8="'+r.resourcePath+'"  data-sc_href="'+r.resourcePath+'" data-tid="'+r.adFloorId+'" data-fid="'+r.adFloorTypeId+'"><img src="static/images_v2/i-load.png" data-original="'+r.imgPath+'" /></a>')}),a+="</div>",this.getId("indexV2Crazy").innerHTML=a,this.LazyLoadImg(document.querySelectorAll("#indexV2Crazy img")),a=null,d=null}if(this.storageData.adFloorBrandList.length>0){var s="",n="";this.storageData.adFloorBrandList.forEach(function(r,i){e.storageData.adFloorBrandList[0].title&&(n=r.colorValue&&-1!=r.colorValue.indexOf(",")?r.colorValue.split(",")[1]:r.colorValue,s+='<h2 class="index-v2-title" style="background-size: 100% auto; background: url('+(r.backUrl?r.backUrl:"")+") no-repeat center top; color: "+(n||"#AB77F7")+'">'+(r.title||"桔子优选")+'</h2><div class="index-v2-push s3 clearfix">'),r.list.length>0&&r.list.forEach(function(e,r){s+='<a class="js_sc_jump" href="javaScript:;" data-sc_1="'+(e.title||"桔子优选")+'" data-sc_2="indexV2Optimization" data-sc_3="7" data-sc_4="'+e.title+'" data-sc_5="'+e.id+'" data-sc_6="'+r+'" data-sc_7="2" data-sc_8="'+e.resourcePath+'"  data-sc_href="'+e.resourcePath+'" data-tid="'+e.adFloorId+'" data-fid="'+e.adFloorTypeId+'"><img src="static/images_v2/i-load.png" data-original="'+e.imgPath+'" /></a>'}),s+="</div>"}),this.getId("indexV2Optimization").innerHTML=s,this.LazyLoadImg(document.querySelectorAll("#indexV2Optimization img")),s=null}if(this.storageData.sceneDownList.length>0){var L='<h2 class="index-v2-title">大牌特卖</h2>';this.storageData.sceneDownList.forEach(function(r,i){L+='<div class="index-v2-brand clearfix"><a href="javaScript:;" data-sc_1="大牌特卖" data-sc_2="indexV2Brand" data-sc_3="6" data-sc_4="场景页" data-sc_5="'+r.id+'" data-sc_6="'+i+'_0" data-sc_7="2" data-sc_8="'+e.urlurl+"/scene.html?scene_id="+r.sceneId+'"  data-sc_href="'+e.urlurl+"/scene.html?scene_id="+r.sceneId+'" class="index-v2-bmaximg js_sc_jump"><img src="static/images_v2/i-load.png" data-original="'+r.image+'" /></a><div class="index-v2-blist">',r.product.length>0&&r.product.forEach(function(r,c){L+='<a href="javaScript:;" data-sc_1="大牌特卖" data-sc_2="indexV2Brand" data-sc_3="6" data-sc_4="'+r.productName+'" data-sc_5="'+r.productId+'" data-sc_6="'+i+"_"+(1*c+1)+'" data-sc_7="1" data-sc_8="'+e.urlurl+"/detail.html?productId="+r.productId+'"  data-sc_href="'+e.urlurl+"/detail.html?productId="+r.productId+'" class="index-v2-bcom js_sc_jump"><span class="index-v2-bimg"><img src="static/images_v2/i-load.png" data-original="'+r.productImg+'" /></span><span class="index-v2-bname"><em>'+r.productName+'</em></span><span class="index-v2-bpay"><em>¥'+parseFloat(r.productPrice)+"</em>"+(r.isActShow&&1==r.isActShow?'<span class="act-price">活动价</span>':r.marketPrice-r.productPrice>0?"<i>¥"+parseFloat(r.marketPrice)+"</i>":"")+"</span>"+(r.productPaymentMinInstallment/1?'<span class="index-v2-bmset"><i>月供:</i><em>¥'+r.productPaymentMinInstallment+"</em></span>":"")+'<span class="index-v2-bdis">',r.tagFree&&(L+="<i>"+r.tagFree+"</i>"),r.tagFall&&r.marketPrice&&(1==r.priceType?L+=r.spuPrice&&r.marketPrice-r.spuPrice>0?"<i>直降"+(r.marketPrice-r.spuPrice)+"</b></i>":"":1==localStorage.getItem("member")&&r.spuPrice>0?L+=r.marketPrice-r.spuPrice>0?"<i>直降"+(r.marketPrice-r.spuPrice)+"</i></i>":"":L+=r.marketPrice-r.productPrice>0?"<i>直降"+(r.marketPrice-r.productPrice)+"</i></i>":""),L+="</span></a>"}),L+="</div></div>"}),L+="</div>",this.getId("indexV2Brand").innerHTML=L,this.LazyLoadImg(document.querySelectorAll("#indexV2Brand img"));var u=document.querySelectorAll(".index-v2-blist");u.length>0&&u.forEach(function(r,i){r.addEventListener("scroll",function(){e.LazyLoadImg(document.querySelectorAll("#indexV2Brand img"))})}),L=null}if(this.storageData.recommendedForYou.length>0){var y='<h2 class="index-v2-title">为你推荐</h2><div class="index-v2-rlist clearfix">';this.storageData.recommendedForYou.forEach(function(r,i){y+='<a href="javaScript:;" data-sc_1="为你推荐" data-sc_2="indexV2ForYou" data-sc_3="8" data-sc_4="'+r.productName+'" data-sc_5="'+r.productId+'" data-sc_6="'+i+'" data-sc_7="1" data-sc_8="'+e.urlurl+"/detail.html?productId="+r.productId+'"  data-sc_href="'+e.urlurl+"/detail.html?productId="+r.productId+'" class="index-v2-commodity js_sc_jump"><i class="index-v2-surplus" style="display:none;">仅剩3件</i><span class="index-v2-cimg"><img src="static/images_v2/i-load.png" data-original="'+r.productImg+'" /></span><span class="index-v2-cname"><i>自营</i><em>'+r.productName+"</em></span>",1==r.priceType?y+='<span class="in-recom-price vip">¥'+parseFloat(r.spuPrice)+'</span> <i class="t-vip"></i> <span class="in-recom-first"><i class="i-first"></i> 优先购</span>':y+='<span class="in-recom-price">¥'+parseInt(r.productPrice)+"</span>"+(r.isActShow&&1==r.isActShow?'<span class="act-price'+(r.spuPrice/1?" mr0":"")+'">活动价</span>':"")+(r.spuPrice/1?'<span class="in-recom-price-vip">¥'+parseFloat(r.spuPrice)+'</span> <i class="t-vip"></i>':r.marketPrice&&r.marketPrice-r.productPrice>0?' <span class="font-del">¥'+parseFloat(r.marketPrice)+"</span>":""),y+='<span class="index-v2-cmset"><i>月供:</i><em>¥'+r.productPaymentMinInstallment+"</em></span>";var c="";r.tagFall&&r.marketPrice&&(c=1==r.priceType?r.spuPrice&&r.marketPrice-r.spuPrice>0?'<i class="zj">直降<br><b>'+(r.marketPrice-r.spuPrice)+"</b></i>":"":1==localStorage.getItem("member")&&r.spuPrice>0?r.marketPrice-r.spuPrice>0?'<i class="zj">直降<br><b>'+(r.marketPrice-r.spuPrice)+"</b></i>":"":r.marketPrice-r.productPrice>0?'<i class="zj">直降<br><b>'+(r.marketPrice-r.productPrice)+"</b></i>":"");var t=r.tagFree?'<i class="mx">'+r.tagFree+"</i>":"";y+='<span class="in-pro-tag">'+c+t+"</span></a>"}),y+="</div>",this.getId("indexV2ForYou").innerHTML=y,this.LazyLoadImg(document.querySelectorAll("#indexV2ForYou img")),y=null}this.scrollSetTheme(),this.clickTabAjax(),this.storageData=null}},{key:"clickTabAjax",value:function(){var e=this,r=document.querySelectorAll("#indexV2Tab a"),i=document.querySelectorAll(".aspen-content-sort");if(r&&i)for(var c=0,t=r.length;c<t;c++)r[c].index=c,r[c].addEventListener("click",function(){if(e.initItem=1,e.sensorsobj.secondaryPageSorting=this.getAttribute("data-navindex"),e.sensorsobj.secondaryPageName=this.getAttribute("data-sc_navname"),!/^[<]img/.test(this.innerHTML)){for(var c=this.getAttribute("data-pid"),t=0,o=r.length;t<o;t++)r[t].classList.remove("cur");if(this.classList.add("cur"),this.offsetLeft>window.innerWidth/2?this.parentNode.scrollLeft=this.offsetLeft+this.offsetWidth/2-window.innerWidth/2:this.parentNode.scrollLeft=0,/推荐/.test(this.innerHTML)){e.newSwiperIsOpen=!0,e.isSetTheme=!0,e.getId("indexV2Headers").css({background:e.swiperBgColor});var g=document.querySelectorAll("#indexV2Tab a");g&&g.forEach(function(e,r){e.css({color:"#fff"})}),e.getId("indexV2SearchBtns").css({color:"#fff"}),e.getId("recommendWrapV2").css({display:"block"}),e.getId("classListV2").css({display:"none"})}else{e.newSwiperIsOpen=!1,e.isSetTheme=!1,e.getId("indexV2Headers").css({background:"#fff"}),e.getId("indexV2SearchBtns").css({color:"#333"}),document.querySelectorAll("#indexV2Tab a").forEach(function(e,r){e.css({color:"#333"})}),e.getId("recommendWrapV2").css({display:"none"}),e.getId("classListV2").css({display:"block"}),i.forEach(function(e,r){e.css({display:"none"})}),e.getId("v2TabContent"+c).css({display:"block"});var h=""!=this.getAttribute("data-subtitle")?this.getAttribute("data-subtitle"):"好评如潮";/yesload/.test(this.className)||e.subClassLoadAjax(c,e.getId("v2TabContent"+c),this,h,function(){e.praiseListAjax(c,e.initPage),e.loadMorePraiseList(c)})}}})}},{key:"subNewSwiper",value:function(e,r){this.newSubSwiperState=new Swiper(e,{pagination:r,loop:!0,grabCursor:!0,observer:!0,observeParents:!0,paginationClickable:!0,autoplayDisableOnInteraction:!1})}},{key:"loadMorePraiseList",value:function(e){var r=this;r.getId("classListV2").addEventListener("click",function(i){var c=i.target;if(c.id=="praiseMoreBtns"+e){if(/no-data-list/.test(c.className))return void aspenLib.tips("客官，没有更多数据");r.initItem++,r.praiseListAjax(e,r.initPage);var t=document.querySelectorAll("#praiseListWraps"+e+" img");t.length>0&&r.LazyLoadImg(t)}})}},{key:"praiseListAjax",value:function(e,r){var i=this,c="";aspenLib.ajax({url:aspenLib.ajaxUrl+"/nvaHome/getProductListByNavId.do",type:"post",contentType:"application/x-www-form-urlencoded",data:{navId:e||"",start:i.initItem,size:r},success:function(r){if(1==r.result){var t=r.data,o=i.getId("praiseMoreBtns"+e);if(0==t.length)return void(o&&(o.classList.add("no-data-list"),o.innerHTML="- 客官，没有更多数据 -"));t.length<10&&o&&(o.classList.add("no-data-list"),o.innerHTML="- 客官，没有更多数据 -");for(var g=0,h=t.length;g<h;g++){var l=parseInt(t[g].malMobilePrice),p="";t[g].tagFall&&t[g].marketPrice&&(p=1==t[g].priceType?t[g].spuPrice&&t[g].marketPrice-t[g].spuPrice>0?'<i class="zj">直降<br><b>'+(t[g].marketPrice-t[g].spuPrice)+"</b></i>":"":1==localStorage.getItem("member")&&t[g].spuPrice>0?t[g].marketPrice-t[g].spuPrice>0?'<i class="zj">直降<br><b>'+(t[g].marketPrice-t[g].spuPrice)+"</b></i>":"":t[g].marketPrice-t[g].malMobilePrice>0?'<i class="zj">直降<br><b>'+(t[g].marketPrice-t[g].malMobilePrice)+"</b></i>":"");var v=t[g].tagFree?'<i class="mx">'+t[g].tagFree+"</i>":"";c+='<a href="/detail.html?productId='+t[g].id+'"><span class="for-you-img"><img src="static/images_v2/i-load.png" data-original="'+t[g].masterImg+'"></span><p><b class="in-recom-name">'+t[g].name1+"</b>",1==t[g].priceType?c+='<span class="in-recom-price vip">¥'+parseFloat(t[g].spuPrice)+'</span> <i class="t-vip"></i> <span class="in-recom-first"><i class="i-first"></i> 优先购</span>':c+='<span class="in-recom-price">¥'+l+"</span>"+(t[g].isActShow&&1==t[g].isActShow?'<span class="act-price'+(t[g].spuPrice/1?" mr0":"")+'">活动价</span>':"")+(t[g].spuPrice>0?'<span class="in-recom-price-vip">¥'+parseFloat(t[g].spuPrice)+'</span><i class="t-vip"></i>':t[g].marketPrice&&t[g].marketPrice-t[g].malMobilePrice>0?' <span class="font-del">¥'+parseFloat(t[g].marketPrice)+"</span>":""),c+='<br>月供：<span class="font-pink">¥'+t[g].productPaymentMinInstallment+'</span></p><span class="in-pro-tag">'+p+v+"</span></a>"}var a=i.getId("praiseListWraps"+e);a&&(a.innerHTML+=c);var f=a.querySelectorAll("img");f.length>0&&i.LazyLoadImg(f)}else aspenLib.tips(r.msg)},error:function(){aspenLib.tips("接口请求出错了")}})}},{key:"sortNumber",value:function(e,r){return e.sort-r.sort}},{key:"subClassLoadAjax",value:function(e,r,i,c,t){var o=this,g="";aspenLib.ajax({url:aspenLib.ajaxUrl+"/nvaHome/indexInfo.do",type:"GET",contentType:"application/x-www-form-urlencoded",data:{navId:e||""},success:function(h){if(1==h.result){if(h.data.length>0){r.innerHTML="",i.classList.add("yesload");var l=h.data.sort(o.sortNumber);if(l)for(var p=0,v=l.length;p<v;p++)switch(l[p].titleType){case 1:if(l[p].nvaDetail.length>0){var a="";if(g+='<div class="erji-menu-wrap clearfix">',g+='<div class="erji-menu-main" id="erjiMenuWrap'+e+'">',l[p].nvaDetail.length>8)for(var f=Math.ceil(l[p].nvaDetail.length/8),d=0;d<f;d++){g+='<div class="erji-menu">';for(var s=8*d,n=8*(d+1);s<n&&s<l[p].nvaDetail.length;s++)g+='<a href="'+l[p].nvaDetail[s].link+'"><i><img src="static/images_v2/i-load.png"  data-original="'+l[p].nvaDetail[s].image+'"></i><em>'+l[p].nvaDetail[s].adName+"</em></a>";g+="</div>",a+=0==d?'<i class="active"></i>':"<i></i>"}else for(var L=0,u=l[p].nvaDetail.length;L<u;L++)g+='<a href="'+l[p].nvaDetail[L].link+'"><i><img src="static/images_v2/i-load.png"  data-original="'+l[p].nvaDetail[L].image+'"></i><em>'+l[p].nvaDetail[L].adName+"</em></a>";g+="</div>",g+='<div id="erjiMenuItem'+e+'" class="erji-menu-item">'+a+"</div>",g+="</div>"}break;case 2:if(l[p].nvaDetail.length>0){g+='<div class="erji-brand clearfix">';for(var y=0,k=l[p].nvaDetail.length;y<k;y++)g+='<a href="'+l[p].nvaDetail[y].link+'"><img src="static/images_v2/i-load.png"  data-original="'+l[p].nvaDetail[y].image+'"></a>';g+="</div>"}break;case 3:if(l[p].nvaDetail.length>1){var P="";g+='<div class="jzfq-sub-device"><div class="swiper-container" id="subSlideWrap'+e+'"><div class="swiper-wrapper clearfix">';for(var I=0,D=l[p].nvaDetail.length;I<D;I++)g+='<div class="swiper-slide J-slide-element'+e+'"><a href="'+l[p].nvaDetail[I].link+'"><img src="'+l[p].nvaDetail[I].image+'" /></a></div>',D<=1?P="":P+=0==I?'<i class="actives"></i>':"<i></i>";g+='</div></div><div id="subSlideItem'+e+'" class="swiper-pagination">'+P+"</div>",g+="</div>"}1==l[p].nvaDetail.length&&(g+='<div class="erji-slide-element"><a href="'+l[p].nvaDetail[0].link+'"><img src="'+l[p].nvaDetail[0].image+'" /></a></div>');break;case 4:if(l[p].nvaDetail.length>0){g+='<div class="erji-act clearfix">',g+='<h3 class="erji-tit">'+(l[p].title?l[p].title:"热门活动")+"</h3>";for(var j=0,S=l[p].nvaDetail.length;j<S;j++)g+='<a href="'+l[p].nvaDetail[j].link+'"><img src="static/images_v2/i-load.png"  data-original="'+l[p].nvaDetail[j].image+'"></a>';g+="</div>"}}g+='<div class="erji-pro clearfix"><h3 class="erji-tit">'+c+'</h3><div class="index-recom clearfix" id="praiseListWraps'+e+'"></div><a href="javascript:;" class="praise-more-btns" id="praiseMoreBtns'+e+'" data-page-id="'+o.initItem+'">-点击加载更多-</a></div>'}else g+='<div class="erji-pro clearfix"><h3 class="erji-tit">'+c+'</h3><div class="index-recom clearfix" id="praiseListWraps'+e+'"></div><a href="javascript:;" class="praise-more-btns" id="praiseMoreBtns'+e+'" data-page-id="'+o.initItem+'">-点击加载更多-</a></div>';r.innerHTML=g,o.getId("subSlideWrap"+e)&&o.subNewSwiper(o.getId("subSlideWrap"+e),o.getId("subSlideItem"+e));var w=document.querySelectorAll("#v2TabContent"+e+" img");w.length>0&&o.LazyLoadImg(w),"function"==typeof t&&t.call(this)}else aspenLib.tips(h.msg)},error:function(){aspenLib.tips("接口请求出错了")}})}},{key:"bannerJump",value:function(){var e=this;document.getElementById("js_jump").addEventListener("click",function(r){for(var i=r.target;!/js_sc_jump/.test(i.classList);){if("body"==i.nodeName.toLowerCase())return!1;if(/js_sc_jump/.test(i.classList)){i=null;break}i=i.parentNode}e.sensorsobj.moduleName=i.getAttribute("data-sc_1"),e.sensorsobj.moduleID=i.getAttribute("data-sc_2"),e.sensorsobj.moduleLocation=i.getAttribute("data-sc_3"),e.sensorsobj.elementName=i.getAttribute("data-sc_4"),e.sensorsobj.elementID=i.getAttribute("data-sc_5"),e.sensorsobj.elementLocation=i.getAttribute("data-sc_6"),e.sensorsobj.elementContentType=i.getAttribute("data-sc_7"),e.sensorsobj.elementContent=i.getAttribute("data-sc_8");try{sensors.track("indexElementClick",e.sensorsobj)}catch(e){}window.location.href=i.getAttribute("data-sc_href")})}},{key:"tabJump",value:function(){var e=location.protocol+"//"+location.hostname+"/";document.getElementById("js_tab").addEventListener("click",function(r){for(var i=r.target;!/js_tab_jump/.test(i.classList);){if(/js_tab_jump/.test(i.classList)){i=null;break}i=i.parentNode}try{sensors.track("navigationbarElementClick",{currentPage:"首页",elementContent:i.getAttribute("data-sc_1")}),console.log("神策上报")}catch(e){}window.location.href=e+i.getAttribute("data-sc_href")})}}]),e}();new indexV2Script;